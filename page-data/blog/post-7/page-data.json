{"componentChunkName":"component---node-modules-gatsby-theme-blog-core-src-templates-post-query-js","path":"/blog/post-7/","result":{"data":{"site":{"siteMetadata":{"title":"Kazumi Karbowski","social":[{"name":"Twitter","url":"https://twitter.com/Codingmamakaz"},{"name":"GitHub","url":"https://github.com/codingmamakaz"}]}},"blogPost":{"id":"f731822c-fe14-5409-a4a9-dae28a5c29ce","excerpt":"According to Wikipedia, internationalization (shorthand as i18n as there are exactly eighteen characters between the first “i” and the last…","body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"path\": \"/blog/i18n_with_rails_and_i18n-js\",\n  \"date\": \"2020-10-06\",\n  \"title\": \"Internationalization with Rails and i18n-js\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"According to Wikipedia, internationalization (shorthand as i18n as there are exactly eighteen characters between the first \\u201Ci\\u201D and the last \\u201Cn\\u201D) is the process of designing a software application so that it can be adapted to various languages and regions without engineering changes.\"), mdx(\"p\", null, \"I was working on an app built with React on Rails. Most of the pages were written in React, but some pages were written in and rendered from the Rails views. This meant that I needed to have i18n on the backend and also send translated strings to the React frontend.\\nI looked for articles and tutorials, but I couldn\\u2019t find one that was solving the same problem I had. I found a lot of tutorials on i18n-ing Rails app, and some on Rails and Javascript, but not on Rails and React.\\nAfter spending some time researching, I decided to try \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/svenfuchs/rails-i18n\"\n  }), \"rails-i18n\"), \" and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/fnando/i18n-js\"\n  }), \"i18n-js\"), \" gems.\"), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rails-i18n\"), \" provides an easy-to-use and extensible framework for translating your app. \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"i18n-js\"), \" is a small library to generate the Rails i18n translations on the JavaScript side. It provides middleware that auto-generates translated Javascript files from the yml files on the Rails side.\\nThese seemed like a good way to solve the problem I had.\\nI would like to share how I did it.\"), mdx(\"p\", null, \"First, add gems to your Gemfile.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"gem \\\"i18n-js\\\"\\ngem \\\"rails-i18n\\\"\\n\")), mdx(\"p\", null, \"Don\\u2019t forget to install gems by running\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"bundle install\")), mdx(\"p\", null, \"If you are using webpacker, run\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm install i18n-js\"), \"\\nIf you are using asset pipeline, check out \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/fnando/i18n-js\"\n  }), \"this ReadMe\"), \".\"), mdx(\"p\", null, \"Define available locales in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config/application.rb\"), \". In my case, I\\u2019m adding support for English and Japanese. \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.i18n.available_locales = [:ja, :en]\")), mdx(\"p\", null, \"You can check all the locales available in the Rails console \", mdx(\"br\", null)), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"I18n::JS.filtered_translations.keys\\n=> [:en, :ja]\\n\")), mdx(\"p\", null, \"Now add English strings in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"en.yml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"en:\\n  hello: \\\"Hello world\\\"\\n\")), mdx(\"p\", null, \"You can check to see if it\\u2019s working in the rails console like so\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"I18n.t 'hello'\\n=> \\\"Hello world\\\"\\n\")), mdx(\"p\", null, \"Now let\\u2019s add Japanese translation in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"ja.yml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"ja:\\n  hello: \\\"\\u3053\\u3093\\u306B\\u3061\\u306F\\u3002\\u4E16\\u754C\\u3002\\\"\\n\")), mdx(\"p\", null, \"This is how we can access the translation in a slim file.\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"h1 = t('hello')\")), mdx(\"p\", null, \"Now we got it working on the Rails side, let\\u2019s move on to getting the translation on the React side.\"), mdx(\"p\", null, \"Add a middleware by adding this line \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config.middleware.use I18n::JS::Middleware\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config/application.rb\"), mdx(\"br\", null), \"\\nThe middleware generates translation files on the frontend.\"), mdx(\"p\", null, \"Run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rails generate i18n:js:config\"), \", which will generate \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config/i18n-js.yml\")), mdx(\"p\", null, \"This is my configuration added to  \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"config/i18n-js.yml\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"translations:\\n- file: 'app/javascript/bundles/i18n/en.js'\\n  prefix: \\\"import I18n from 'i18n-js';\\\\n\\\"\\n  pretty_print: true\\n  only: 'en.*'\\n- file: 'app/javascript/bundles/i18n/ja.js'\\n  prefix: \\\"import I18n from 'i18n-js';\\\\n\\\"\\n  pretty_print: true\\n  only: 'ja.*'\\n\")), mdx(\"p\", null, mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"file\"), \" is specifying the path of my choice for js translation file.\", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"prefix\"), \" is optional, but without it, I was getting \\u201CI18n is not defined\\u201D error, and I couldn\\u2019t get it to work. It will add the line at the beginning of the resultant translation file. \", mdx(\"br\", null), \"\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"pretty_print\"), \" is optional as well, but I definitely recommend putting this. It adds whitespace and indentation in your output file, which makes it so much easier to read the file.\"), mdx(\"p\", null, \"To export all translation files and every time you have new translation in the .yml file, run \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"rake i18n:js:export\"), \".\\nThis will generate translation files to your chosen paths.\"), mdx(\"p\", null, \"Add this to a react file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import i18n from 'i18n-js'\")), mdx(\"p\", null, \"Also remember to import your generated translation files.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"import en from '../../i18n/en';\\nimport ja from '../../i18n/ja';\\n\")), mdx(\"p\", null, \"To set default locale and locale on the backend, I added this in \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"views/layouts/application.slim\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"- javascript_tag do\\n      I18n.locale = I18n.locale\\n      I18n.defaultLocale = I18n.default_locale\\n\")), mdx(\"p\", null, \"To set them on the React side, you can add this inside the render (this set them to be in Japanese)\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"I18n.defaultLocale = \\\"ja\\\";\\nI18n.locale = \\\"ja\\\";\\n\")), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"ja needs to be a string like \", mdx(\"inlineCode\", {\n    parentName: \"strong\"\n  }, \"\\\"ja\\\"\"))), mdx(\"p\", null, \"Finally, add we can access your Rails translations from React like so.\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \" <h2>{I18n.t('hello')}</h2>\"), \"\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://res.cloudinary.com/codingmamakaz/image/upload/v1601997665/Screen_Shot_2020-10-06_at_11.18.31_AM_seh2hd.png\",\n    \"alt\": \"English hello world\"\n  })), \"\\n\", mdx(\"img\", _extends({\n    parentName: \"p\"\n  }, {\n    \"src\": \"https://res.cloudinary.com/codingmamakaz/image/upload/v1601997665/Screen_Shot_2020-10-06_at_11.14.36_AM_izs69h.png\",\n    \"alt\": \"Japanese hello world\"\n  }))), mdx(\"p\", null, \"The left side is English and the right side is \\u201Chello world\\u201D in Japanese. As you can see, some of the translation\\u2019s strings might be longer, which may cause you a lot of headaches dealing with css \\uD83D\\uDE31\"), mdx(\"p\", null, \"I hope this post helps someone.\\nHappy i18n-ing!\"));\n}\n;\nMDXContent.isMDXComponent = true;","slug":"/blog/post-7/","title":"Internationalization with Rails and i18n-js","tags":[],"keywords":[],"date":"October 06, 2020"},"previous":{"id":"318dd9cc-2171-5aaa-8c7b-be35acaf9fa8","excerpt":"Hoisting and scopes can be very confusing especially for beginners. I’ve spent some time trying to understand them and here is what I’ve…","slug":"/blog/post-6/","title":"JavaScript Hoist and Scopes","date":"July 17, 2019"},"next":null},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"f731822c-fe14-5409-a4a9-dae28a5c29ce","previousId":"318dd9cc-2171-5aaa-8c7b-be35acaf9fa8"}}}